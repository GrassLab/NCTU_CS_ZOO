import numpy as np
import math3d as m3d

# Static axis, Euler angle in degree, translation in meter
# key:id, value:([rx,ry,rz],[tx,ty,tz])
tag_spec = {
    0: ([90, 0, 90], [0.05, 0.195, 0.128]),
    1: ([90, 0, 90], [0.05, 0.585, 0.128]),
    2: ([90, 0, 90], [0.05, 0.975, 0.128]),
    3: ([0, 0, 0], [0.12, 0.145, 0]),
    4: ([0, 0, 0], [0.12, 0.195, 0]),
    5: ([0, 0, 0], [0.12, 0.245, 0]),
    6: ([0, 0, 0], [0.12, 0.535, 0]),
    7: ([0, 0, 0], [0.12, 0.585, 0]),
    8: ([0, 0, 0], [0.12, 0.635, 0]),
    9: ([0, 0, 0], [0.12, 0.925, 0]),
    10: ([0, 0, 0], [0.12, 0.975, 0]),
    11: ([0, 0, 0], [0.12, 1.025, 0]),
    12: ([0, 0, 0], [0.4, 0.195, 0]),
    13: ([0, 0, 0], [0.45, 0.195, 0]),
    14: ([0, 0, 0], [0.4, 0.39, 0]),
    15: ([0, 0, 0], [0.45, 0.39, 0]),
    16: ([0, 0, 0], [0.4, 0.585, 0]),
    17: ([0, 0, 0], [0.45, 0.585, 0]),
    18: ([0, 0, 0], [0.4, 0.78, 0]),
    19: ([0, 0, 0], [0.45, 0.78, 0]),
    20: ([0, 0, 0], [0.4, 0.975, 0]),
    21: ([0, 0, 0], [0.45, 0.975, 0]),
    22: ([90, 0, 0], [0.75, 0.125, 0.128]),
    23: ([90, 0, 0], [0.75, 0.32, 0.128]),
    24: ([90, 0, 0], [0.75, 0.515, 0.128]),
    25: ([90, 0, 0], [0.75, 0.71, 0.128]),
    26: ([90, 0, 0], [0.75, 0.905, 0.128]),
    27: ([90, 0, 0], [0.75, 1.1, 0.128]),
    28: ([90, 0, 0], [0.15, 1.15, 0.128]),
    29: ([90, 0, 0], [0.3, 1.15, 0.128]),
    30: ([90, 0, 0], [0.45, 1.15, 0.128]),
}


def gen_challenge10_mapping(tag_spec):
    mapping = {}
    for t_id, (rot, tr) in tag_spec.items():
        oTtag = m3d.Transform(m3d.Orientation.new_euler(np.deg2rad(rot), 'xyz'), tr)
        mapping[t_id] = oTtag.array
    return mapping